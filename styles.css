/* Final combined stylesheet (responsive, accessible, low-motion and text-only modes supported) */
/* ...complete stylesheet as provided earlier (keeps layout, modals, flashcards, analytics, lesson viewer styles)... */

:root{
  --bg:#f6f9ff; --surface:#ffffff; --muted:#5b6b80; --text:#052039;
  --primary:#1070ff; --radius:12px; --fs:16px;
}
@media (prefers-color-scheme: dark){
  :root{ --bg:#071026; --surface:#07192a; --muted:#9ab0cc; --text:#e6f0ff; --primary:#66a6ff; }
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;background:linear-gradient(180deg,var(--bg),#ffffff00 60%);color:var(--text);font-size:var(--fs);-webkit-font-smoothing:antialiased}
.topbar{background:linear-gradient(90deg,#ffffffcc,#f0f8ffcc);border-bottom:1px solid #e6eef8;position:sticky;top:0;z-index:20}
.topbar-inner{max-width:1100px;margin:0 auto;padding:8px 12px;display:flex;align-items:center;gap:12px}
.brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--text)}
.logo{width:44px;height:44;border-radius:8px}
.brand-text{font-weight:800;font-size:1.05rem}
.main-nav{margin-left:12px;display:flex;gap:6px;align-items:center}
.nav-btn{background:transparent;border:0;padding:8px 10px;border-radius:8px;cursor:pointer}
.nav-btn:hover{background:rgba(16,112,255,0.06)}
.nav-btn.active{background:rgba(16,112,255,0.08);border-left:3px solid var(--primary);padding-left:6px}
.top-actions{margin-left:auto;display:flex;gap:8px;align-items:center}
.icon-btn{background:transparent;border:0;padding:8px;border-radius:8px;cursor:pointer}

#app{max-width:1100px;margin:20px auto;padding:0 12px}
.container{max-width:1100px;margin:0 auto}
.grid{display:flex;gap:16px;align-items:start}
.card{background:var(--surface);padding:14px;border-radius:12px;box-shadow:0 6px 18px rgba(10,24,42,0.04)}
.card.small{padding:10px}
.stack{display:flex;flex-direction:column;gap:8px}
.btn{background:#fff;border:1px solid #e6eef8;padding:9px 12px;border-radius:10px;font-weight:700;cursor:pointer}
.btn.small{padding:6px 8px;font-size:.9rem}
.btn.danger{background:#fff;border-color:#f5d0d0;color:#8a1d1d}
.muted{color:var(--muted)}
.subject-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
@media (max-width:920px){ .subject-grid{grid-template-columns:repeat(2,1fr)} .grid{flex-direction:column} .main-nav{display:none} }
@media (max-width:560px){ .subject-grid{grid-template-columns:1fr} .topbar-inner{padding:8px} }

.subject-card{padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#fafcff);cursor:pointer;border:1px solid #eef6ff;display:flex;flex-direction:column;gap:8px}
.profile-summary{display:flex;gap:8px;align-items:center}
.avatar{width:56px;height:56;border-radius:10px;object-fit:cover}
.avatar-wrap{text-align:center}
.row{display:flex;gap:12px;align-items:flex-start}
.form-fields{flex:1;display:flex;flex-direction:column;gap:8px}
.hidden-input{display:none}

/* modal */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:18px;background:rgba(2,6,23,0.35)}
.modal.hidden{display:none}
.modal-panel{width:100%;max-width:920px;border-radius:12px;overflow:hidden}
.modal-header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:linear-gradient(90deg,#fff,#f8fbff);border-bottom:1px solid #eef6ff}
.modal-body{padding:16px;display:grid;gap:12px;background:var(--surface)}
.modal-footer{padding:12px 16px;background:linear-gradient(90deg,#fff,#f8fbff);border-top:1px solid #eef6ff;text-align:right;color:var(--muted)}

/* accessibility focus */
button:focus, input:focus, select:focus { outline: 3px solid rgba(16,112,255,0.18); outline-offset:2px; }

/* reduce motion */
.reduce-motion * { transition: none !important; animation: none !important; }

/* simple footer */
.footer{max-width:1100px;margin:24px auto;padding:12px;color:var(--muted);font-size:.95rem}

/* Flashcards */
.flashcard-card{border-radius:12px;padding:18px;background:linear-gradient(180deg,#fff,#f8fbff);box-shadow:0 6px 18px rgba(10,24,42,0.04);min-height:140px;display:flex;flex-direction:column;justify-content:center;align-items:center}
.flashcard-front{font-size:1.1rem;font-weight:700}
.flashcard-back{font-size:1rem;margin-top:8px}
.flashcard-controls{display:flex;gap:8px;margin-top:12px}
.flashcard-list-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px solid #eef6ff}
.small-muted{color:var(--muted);font-size:.95rem}

/* Analytics & exams */
.analytics-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.analytics-card{padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfdff);border:1px solid #eef6ff}
.exam-q{padding:10px;border-radius:8px;border:1px solid #eef6ff;margin-bottom:8px}
.export-link{color:var(--primary);text-decoration:underline;cursor:pointer}

/* Lesson viewer */
.topic-list{min-width:220px;background:linear-gradient(180deg,#fff,#fbfdff);padding:8px;border-radius:10px;max-height:60vh;overflow:auto}
.topic-item{padding:10px;border-radius:8px;cursor:pointer}
.topic-item.active{background:rgba(16,112,255,0.06);font-weight:700}